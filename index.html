<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Luvvies Crush</title>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="page">
    <div id="scrollBg"></div>
    <div id="globalBg"></div>
    <div id="toast"></div>

    <div class="modalBack" id="greetBack">
      <div class="modal greet">
        <img id="greetLogo" alt="Logo" />
        <h2>Willkommen bei Luvvies Crush üç≠</h2>
        <div class="sub">
          Match ‚Ä¢ Powerups ‚Ä¢ Mellow-Blocks ‚Ä¢ Lovelie-Bonus ‚ú®<br>
          Bounciger, weicher Candy-Style ‚Äì und jetzt mit richtigem Fullscreen-HUD.
        </div>
        <div class="cta">
          <button class="Btn ghost" id="greetGuide">Anleitung</button>
          <button class="Btn secondary" id="greetPlay">Spielen</button>
        </div>
        <div class="tiny" style="margin-top:10px;">(Dieser Screen erscheint nur 1√ó pro Tag.)</div>
      </div>
    </div>

    <div class="modalBack" id="introBack">
      <div class="modal">
        <h2>Anleitung ‚Äì Luvvies Crush üç≠</h2>
        <ul>
          <li><b>Match 3+</b> gleiche Luvvies (gleiche Figur + gleiche Variant-Farbe).</li>
          <li><b>4er Match</b> ‚Üí <b>Sourworm</b> (Reihe/Spalte je nach Drag)</li>
          <li><b>5er Match</b> ‚Üí <b>Citrussy</b> (Stern Radius 3)</li>
          <li><b>T/L Match</b> ‚Üí <b>Koala</b> (Magie)</li>
          <li><b>Koala + Citrussy</b> ‚Üí 2√ó Board Clean & 2√ó Punkte!</li>
          <li><b>Wurm + Wurm</b> ‚Üí ‚ÄúZu sauer!‚Äù Welle</li>
          <li><b>2√ó Sleepy + 1√ó Mondlie</b> ‚Üí Shuffle <b>4√ó4</b> ‚ú®</li>
          <li><b>2√ó Joyce + 1√ó Smokey</b> ‚Üí Buddy Burst</li>
          <li><b>2√ó Smokey + 1√ó Simba</b> ‚Üí Best Buddy Wave (ab Lvl 4)</li>
          <li><b>Mellow</b> ab Level 3 (alle 4 Level), hat 3 HP ‚Ä¢ Clears daneben ziehen HP ab</li>
          <li><b>???</b> klicken ‚Üí <b>random</b> Powerup/Bonus/Block (mit Puff-Animation)</li>
          <li><b>Falscher Swap</b> kostet <b>3 Moves</b> (au√üer Powerup-Combos).</li>
          <li><b>Keine Z√ºge</b> ‚Üí Auto-Shuffle, ‚àí3 Moves.</li>
        </ul>
        <div class="foot">
          <button class="Btn ghost" id="introClose">Schlie√üen</button>
        </div>
      </div>
    </div>

    <div class="modalBack" id="infoBack">
      <div class="modal">
        <div style="display:flex; gap:14px; align-items:center; flex-wrap:wrap;">
          <img id="infoImg" src="" alt=""
               style="width:172px;height:172px;object-fit:contain;filter:drop-shadow(0 18px 28px rgba(0,0,0,.18));">
          <div style="min-width:240px;">
            <h2 id="infoName" style="margin:0 0 6px">‚Äî</h2>
            <div class="tiny" id="infoTag">‚Äî</div>
            <div style="height:10px"></div>
            <div class="panel" style="padding:10px; border-radius:18px;">
              <b>Ability</b>
              <div id="infoAbility" style="margin-top:6px;font-weight:900;opacity:.9;">‚Äî</div>
            </div>
          </div>
        </div>

        <p id="infoStory" style="margin:12px 0 10px;font-weight:900;opacity:.9;">‚Äî</p>

        <div class="panel" style="padding:10px; border-radius:18px;">
          <b>3 Spr√ºche</b>
          <ul id="infoLines" style="margin:8px 0 0; padding-left:18px;"></ul>
        </div>

        <p class="tiny" style="margin:10px 0 0;">(Platzhalter) Sp√§ter: Plushie-Shop Link ‚ú®</p>
        <div class="foot">
          <button class="Btn ghost" id="infoClose">Schlie√üen</button>
        </div>
      </div>
    </div>

    <header class="app-header">
      <nav>
        <a href="#" class="nav-link">Shop</a>
        <a href="#" class="nav-link">Inventory</a>
        <a href="#" class="nav-link">Leaderboard</a>
      </nav>
    </header>

    <div id="app">
      <div class="topRow">
        <div class="diffWrap">
          <div class="label">Schwierigkeit</div>
          <div class="diffPills" id="diffPills">
            <input type="radio" name="diff" id="d_easy" value="easy" checked><label for="d_easy">Easy</label>
            <input type="radio" name="diff" id="d_normal" value="normal"><label for="d_normal">Normal</label>
            <input type="radio" name="diff" id="d_hard" value="hard"><label for="d_hard">Hard</label>
            <input type="radio" name="diff" id="d_shock" value="shock"><label for="d_shock">Zuckerschock</label>
          </div>
        </div>

        <div class="actions">
          <button class="Btn ghost" id="btnIntro">Anleitung</button>
          <button class="Btn secondary" id="btnNew">Neues Spiel</button>
          <button class="Btn" id="btnHint">Hint</button>
          <button class="Btn" id="btnFs">Vollbild</button>
        </div>
      </div>

      <div class="stats">
        <div class="stat"><div class="k">Level</div><div class="v" id="uiLevel">1</div></div>
        <div class="stat"><div class="k">Ziel</div><div class="v" id="uiGoal">4000</div></div>
        <div class="stat"><div class="k">Score</div><div class="v" id="uiScore">0</div></div>
        <div class="stat"><div class="k">Moves</div><div class="v" id="uiMoves">30</div></div>
        <div class="stat"><div class="k">Combo</div><div class="v" id="uiCombo">x1</div></div>
      </div>

      <div class="progressRow">
        <b>Fortschritt zum Ziel</b>
        <div class="bar"><i id="uiBar"></i></div>
        <div class="pct" id="uiPct">0%</div>
      </div>

      <div class="playArea" id="playArea">
        <div id="boardWrap">
          <div id="fsBg"></div>
          <div id="board"></div>
          <div id="fxLayer"></div>

          <div id="fsHud">
            <div class="hudLeft">
              <div class="hudChip color" id="hudLevel">Level 1</div>
              <div class="hudChip color" id="hudScore">Score 0</div>
              <div class="hudChip" id="hudMoves">Moves 0</div>
              <div class="hudChip" id="hudCombo">Combo x1</div>
            </div>

            <div class="hudCenter">
              <div class="hudProg">
                <div class="tiny" style="opacity:.85;">Ziel</div>
                <div class="pbar"><i id="hudBar"></i></div>
                <div class="tiny" id="hudPct" style="min-width:40px;text-align:right;">0%</div>
              </div>
            </div>

            <div class="hudRight">
              <button class="hudBtn hint" id="fsHint">Hint</button>
              <button class="hudBtn guide" id="fsIntro">Anleitung</button>
              <button class="hudBtn exit" id="fsExit">Exit</button>
            </div>
          </div>
        </div>
      </div>

      <div class="below">
        <div class="panel" id="luvPanel">
          <h3>Deine Luvvies <span class="tiny">(anklicken f√ºr Steckbrief)</span></h3>
          <div class="luvGrid" id="luvMenu"></div>
        </div>

        <div class="panel" id="rightPanel">
          <div>
            <h3>Quick-Tipps</h3>
            <div class="tiny" id="quickTips"></div>
          </div>
          <div style="height:1px;background:rgba(17,13,26,.08);"></div>
          <div style="display:flex;flex-direction:column;gap:10px;flex:1;min-height:0;">
            <h3 style="margin:0;">Leaderboard</h3>
            <div class="lbRow">
              <input id="lbName" maxlength="24" placeholder="Dein Name (z.B. KOALAaufPILLEN)" />
              <label class="tiny" style="display:flex;align-items:center;gap:6px;">
                <input type="checkbox" id="lbAuto" checked>
                Auto-Post bei Game Over
              </label>
            </div>
            <div class="lbRow">
              <button class="Btn secondary" id="btnPost">Score posten</button>
              <button class="Btn ghost" id="btnRefresh">Refresh</button>
            </div>
            <div class="lbList" id="lbList"></div>
          </div>
        </div>
      </div>
    </div>

    <footer class="app-footer">
      <a href="#" class="foot-link">Impressum</a>
      <a href="#" class="foot-link">Datenschutz</a>
    </footer>
  </div>

  <script src="game.js"></script>
</body>
</html>
