<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Luvvies Crush - Ultimate</title>
  
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div id="page">
    <div id="scrollBg"></div>
    <div id="globalBg"></div>
    <div id="toast"></div>

    <div class="modalBack" id="greetBack">
      <div class="modal greet">
        <img id="greetLogo" alt="Logo" />
        <h2>Willkommen bei Luvvies Crush üç≠</h2>
        <div class="sub">
          Jetzt mit <b>Dark Mode</b>, Boss-K√§mpfen und neuen Luvvies!
        </div>
        
        <div class="theme-switch-wrapper">
           <label class="theme-switch" for="checkbox-theme">
            <input type="checkbox" id="checkbox-theme" />
            <div class="slider round"></div>
          </label>
          <span>Dark Mode aktivieren</span>
        </div>

        <div class="cta">
          <button class="Btn ghost" id="greetGuide">Anleitung</button>
          <button class="Btn secondary" id="greetPlay">Spielen</button>
        </div>
      </div>
    </div>

    <div class="modalBack" id="introBack">
      <div class="modal">
        <h2>Anleitung ‚Äì Luvvies Crush üç≠</h2>
        <ul>
          <li><b>Match 3+</b> (Figur UND Farbe m√ºssen passen!)</li>
          <li><b>4er Match</b> ‚Üí <b>Sourworm</b> (Reihe/Spalte)</li>
          <li><b>5er Match</b> ‚Üí <b>Citrussy</b> (Stern Explosion)</li>
          <li><b>T/L Match</b> ‚Üí <b>Koala</b> (Farbe l√∂schen)</li>
          <li><b>Koala + Citrussy</b> ‚Üí 2√ó Board Clean (Double Points!)</li>
          <li><b>Simba + Smokey</b> ‚Üí Best Buddy Wave (ab Lvl 4)</li>
          <li><b>MellowZilla</b> ‚Üí Alle 20 Level (3x3 Boss, 20k Punkte)</li>
          <li><b>Fledernuss</b> ‚Üí Ab Level 10 (Evolutions-Mechanik)</li>
          <li><b>Hint</b> kostet jetzt Moves! (Easy: -1, Shock: -3)</li>
        </ul>
        <div class="foot">
          <button class="Btn ghost" id="introClose">Schlie√üen</button>
        </div>
      </div>
    </div>

    <div class="modalBack" id="infoBack">
      <div class="modal">
        <div style="display:flex; gap:14px; align-items:center; flex-wrap:wrap;">
          <img id="infoImg" src="" alt="" class="info-img-preview">
          <div style="min-width:240px;">
            <h2 id="infoName" style="margin:0 0 6px">‚Äî</h2>
            <div class="tiny" id="infoTag">‚Äî</div>
            <div style="height:10px"></div>
            <div class="panel" style="padding:10px; border-radius:18px;">
              <b>Ability</b>
              <div id="infoAbility" style="margin-top:6px;font-weight:900;opacity:.9;">‚Äî</div>
            </div>
          </div>
        </div>
        <p id="infoStory" style="margin:12px 0 10px;font-weight:900;opacity:.9;">‚Äî</p>
        <div class="foot">
          <button class="Btn ghost" id="infoClose">Schlie√üen</button>
        </div>
      </div>
    </div>

    <div id="app">
      <div class="topRow">
        <div class="diffWrap">
          <div class="label">Modus</div>
          <div class="diffPills" id="diffPills">
            <input type="radio" name="diff" id="d_easy" value="easy" checked><label for="d_easy">Easy</label>
            <input type="radio" name="diff" id="d_normal" value="normal"><label for="d_normal">Normal</label>
            <input type="radio" name="diff" id="d_hard" value="hard"><label for="d_hard">Hard</label>
            <input type="radio" name="diff" id="d_shock" value="shock"><label for="d_shock">Zuckerschock</label>
          </div>
        </div>

        <div class="actions">
          <button class="Btn ghost" id="btnThemeToggle">üåó Theme</button>
          <button class="Btn secondary" id="btnNew">Neues Spiel</button>
          <button class="Btn" id="btnHint">Hint <span id="hintCostBadge" class="badge">-1</span></button>
          <button class="Btn" id="btnFs">Vollbild</button>
        </div>
      </div>

      <div class="stats">
        <div class="stat"><div class="k">Level</div><div class="v" id="uiLevel">1</div></div>
        <div class="stat"><div class="k">Ziel</div><div class="v" id="uiGoal">4000</div></div>
        <div class="stat center-stat"><div class="k">Score</div><div class="v big" id="uiScore">0</div></div>
        <div class="stat"><div class="k">Moves</div><div class="v" id="uiMoves">30</div></div>
        <div class="stat"><div class="k">Combo</div><div class="v" id="uiCombo">x1</div></div>
      </div>

      <div class="progressRow">
        <b>Fortschritt</b>
        <div class="bar"><i id="uiBar"></i></div>
        <div class="pct" id="uiPct">0%</div>
      </div>

      <div class="playArea" id="playArea">
        <div id="boardWrap">
          <div id="fsBg"></div>
          <div id="board"></div>
          <div id="fxLayer"></div>
          
          <div id="fsHud">
            <div class="hudLeft">
              <div class="hudChip color" id="hudLevel">Level 1</div>
              <div class="hudChip color" id="hudScore">0</div>
            </div>
            <div class="hudCenter">
              <div class="hudProg">
                 <div class="pbar"><i id="hudBar"></i></div>
              </div>
            </div>
            <div class="hudRight">
              <button class="hudBtn hint" id="fsHint">Hint</button>
              <button class="hudBtn exit" id="fsExit">Exit</button>
            </div>
          </div>
        </div>
      </div>

      <div class="below">
        <div class="panel" id="luvPanel">
          <h3>Deine Luvvies</h3>
          <div class="luvGrid" id="luvMenu"></div>
        </div>

        <div class="panel" id="rightPanel">
          <h3>Leaderboard</h3>
          <div class="lbRow">
            <input id="lbName" maxlength="24" placeholder="Name (z.B. KOALAaufPILLEN)" />
          </div>
          <div class="lbRow">
            <button class="Btn secondary" id="btnPost">Post Score</button>
            <button class="Btn ghost" id="btnRefresh">Refresh</button>
          </div>
          <div class="lbList" id="lbList"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="game.js"></script>
</body>
</html>
